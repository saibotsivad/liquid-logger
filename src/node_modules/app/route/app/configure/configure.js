import Configure from './Configure.svelte'
import getDailyGoal from 'app/api/get-daily-goal.js'
import setDailyGoal from 'app/api/set-daily-goal.js'

export default ({ asr }) => {
	asr.addState({
		name: 'app.configure',
		route: '/configure',
		template: Configure,
		resolve: async (data, parameters) => {
			return {
				dailyGoal: await getDailyGoal()
			}
		},
		activate({ domApi }) {
			domApi.$on('dailyGoal', async event => {
				await setDailyGoal(event.detail)
			})
		}
	})
}
